<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Finance 4All Learning Lab | Ma√Ætrise Financi√®re Futuriste</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        /* Variables et Reset */
        :root {
            --color-bg: #121217;       /* Fond tr√®s sombre */
            --color-text: #E0E0FF;     /* Texte clair */
            --color-accent: #00FFC0;   /* Accent N√©on Vert/Cyan */
            --color-shadow: rgba(0, 255, 192, 0.5); /* Ombre N√©on */
            --color-error: #FF416C;    /* Feedback Erreur */
            --color-success: #00FFC0;  /* Feedback Succ√®s */
            --color-card-bg: #1e1e2d;  /* Fond de carte l√©g√®rement plus clair */
        }

        *, *::before, *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            background-color: var(--color-bg);
            color: var(--color-text);
            font-family: 'Roboto', sans-serif;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            line-height: 1.6;
            padding: 20px;
        }

        /* 3. WCAG 2.2 : Focus Visuel et Contraste */
        :focus-visible {
            outline: 4px solid var(--color-accent);
            outline-offset: 2px;
            border-radius: 4px;
        }

        /* Header (6. Design Futuriste) */
        .header-futuristic {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 30px;
            background: rgba(30, 30, 45, 0.9);
            border-bottom: 2px solid var(--color-accent);
            box-shadow: 0 0 15px var(--color-shadow);
            margin-bottom: 30px;
            border-radius: 8px;
        }

        .logo {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.8em;
            color: var(--color-accent);
            text-shadow: 0 0 8px var(--color-shadow);
        }

        /* Navigation */
        .nav-links {
            list-style: none;
            display: flex;
            gap: 20px;
        }

        .nav-link {
            text-decoration: none;
            color: var(--color-text);
            padding: 8px 15px;
            border-radius: 4px;
            transition: all 0.3s ease;
        }

        .nav-link:hover, .nav-link.current {
            color: var(--color-bg);
            background-color: var(--color-accent);
            box-shadow: 0 0 10px var(--color-shadow);
        }

        /* 4. Gamification UX : User Stats */
        .user-stats {
            display: flex;
            gap: 25px;
            padding: 10px 15px;
            background-color: var(--color-card-bg);
            border: 1px solid var(--color-accent);
            border-radius: 5px;
        }

        .stat-item {
            font-weight: bold;
            font-family: 'Orbitron', sans-serif;
        }
        
        /* Main Content */
        #app-container {
            flex-grow: 1;
            padding: 20px 0;
            max-width: 900px;
            width: 100%;
            margin: 0 auto;
        }

        .module-title {
            text-align: center;
            font-family: 'Orbitron', sans-serif;
            color: var(--color-accent);
            margin-bottom: 30px;
        }

        /* 4. Gamification : Progress Bar */
        .progress-area {
            margin-bottom: 25px;
            text-align: center;
        }
        
        .progress-bar-container {
            height: 15px;
            background-color: #333;
            border-radius: 8px;
            overflow: hidden;
            border: 1px solid var(--color-accent);
            margin-top: 5px;
        }

        /* 2. Animations CSS Performantes (GPU-Accelerated) */
        .progress-fill {
            height: 100%;
            background-color: var(--color-success);
            /* Utiliser transform: scaleX pour animer la largeur */
            transform: scaleX(0);
            transform-origin: left;
            transition: transform 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94); /* Mouvement fluide */
        }

        /* Quiz Card */
        .quiz-card {
            background-color: var(--color-card-bg);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.5);
        }

        .question-number {
            font-family: 'Orbitron', sans-serif;
            color: var(--color-accent);
            margin-bottom: 15px;
            text-align: right;
        }

        .question-text {
            font-size: 1.5em;
            margin-bottom: 25px;
            font-weight: 400;
        }

        .options-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 20px;
        }

        /* Boutons d'Option */
        .option-btn {
            background-color: #333;
            color: var(--color-text);
            border: 2px solid #555;
            padding: 15px;
            text-align: left;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1em;
            transition: all 0.2s ease-out;
            display: flex;
            align-items: center;
            gap: 15px;
            /* 2. Animations GPU: Utiliser transform */
            transform: scale(1); 
        }

        .option-btn:hover:not(:disabled) {
            border-color: var(--color-accent);
            background-color: #3a3a4c;
            transform: scale(1.01);
            box-shadow: 0 0 10px rgba(0, 255, 192, 0.3);
        }

        .option-label {
            font-family: 'Orbitron', sans-serif;
            display: inline-block;
            min-width: 20px;
            text-align: center;
            background-color: var(--color-bg);
            padding: 5px;
            border-radius: 4px;
        }
        
        .option-btn:disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }

        /* 8. Feedback Visuel Imm√©diat (Point 2: Animations) */
        .option-btn.selected {
            border-color: var(--color-accent);
        }

        .option-btn.correct {
            background-color: rgba(0, 255, 192, 0.15);
            border-color: var(--color-success);
            transform: translate3d(0, -2px, 0); /* Force GPU */
        }

        .option-btn.incorrect {
            background-color: rgba(255, 65, 108, 0.15);
            border-color: var(--color-error);
            animation: shake 0.3s;
        }

        /* Keyframes pour l'animation 'incorrect' */
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            20%, 60% { transform: translateX(-5px); }
            40%, 80% { transform: translateX(5px); }
        }

        /* Boutons d'action (Valider/Suivant) */
        .action-btn {
            padding: 12px 25px;
            font-size: 1.2em;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.1s;
            font-family: 'Orbitron', sans-serif;
            width: 100%;
        }

        .submit-btn {
            background-color: var(--color-accent);
            color: var(--color-bg);
        }

        .next-btn {
            background-color: #5A5A77; /* Couleur secondaire */
            color: var(--color-text);
        }

        .action-btn:hover:not(:disabled) {
            opacity: 0.9;
            transform: translateY(-1px);
        }

        .action-btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }

        /* Feedback Box */
        .feedback-box {
            min-height: 40px;
            margin-bottom: 20px;
            padding: 10px;
            border-radius: 6px;
            background-color: #333;
            color: var(--color-text);
            font-weight: bold;
            display: none; /* Cach√© par d√©faut via JS */
        }
        
        /* Footer */
        .footer-futuristic {
            margin-top: 40px;
            padding: 15px;
            text-align: center;
            font-size: 0.8em;
            color: #888;
            border-top: 1px solid #333;
        }

        /* √âcran de Compl√©tion */
        .completion-screen {
            text-align: center;
            padding: 50px;
            background-color: var(--color-card-bg);
            border-radius: 10px;
            box-shadow: 0 0 20px var(--color-shadow);
        }

        .completion-screen h3 {
            color: var(--color-accent);
            font-family: 'Orbitron', sans-serif;
            margin-bottom: 20px;
        }
        
        /* Media Queries pour la Responsivit√© */
        @media (max-width: 600px) {
            .header-futuristic {
                flex-direction: column;
                gap: 15px;
            }
            .user-stats {
                width: 100%;
                justify-content: space-around;
            }
            .nav-links {
                justify-content: center;
                gap: 10px;
            }
        }
    </style>
</head>
<body>

    <header role="banner" class="header-futuristic">
        <h1 class="logo">Finance 4All Learning Lab <span aria-hidden="true">üöÄ</span></h1>
        
        <div class="user-stats" role="status" aria-live="polite">
            <span class="stat-item" id="user-score" aria-label="Score actuel">üí∞ 0 Points</span>
            <span class="stat-item" id="user-level" aria-label="Niveau actuel">Level I - Novice</span>
        </div>

        <nav role="navigation" aria-label="Navigation principale de l'application">
            <ul class="nav-links">
                <li><a href="#accueil" class="nav-link current" aria-current="page">Accueil</a></li>
                <li><a href="#modules" class="nav-link">Modules</a></li>
                <li><a href="#profil" class="nav-link">Profil</a></li>
            </ul>
        </nav>
    </header>

    <main id="app-container">

        <section id="quiz-module" class="module-view active" aria-labelledby="module-title">
            <h2 id="module-title" class="module-title">Module 1 : Les Fondamentaux du Budget</h2>

            <div class="progress-area">
                <p class="progress-label">Progression du Module:</p>
                <div class="progress-bar-container" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
                    <div class="progress-fill" style="transform: scaleX(0);"></div>
                </div>
            </div>

            <article class="quiz-card" role="region" aria-live="polite">
                <p class="question-number" aria-hidden="true">Question <span id="current-q-num">0</span>/<span id="total-q-num">0</span></p>
                <h3 id="current-question" class="question-text">Chargement...</h3>
                
                <div id="options-container" class="options-container" role="radiogroup" aria-labelledby="current-question">
                    </div>

                <div id="feedback-message" class="feedback-box" aria-live="assertive" hidden></div>
                
                <button id="submit-btn" class="action-btn submit-btn" disabled>
                    Valider la R√©ponse
                </button>
                <button id="next-btn" class="action-btn next-btn" hidden>
                    Question Suivante <span aria-hidden="true">‚Üí</span>
                </button>
            </article>

            <article id="completion-screen" class="completion-screen" role="dialog" aria-modal="true" hidden>
                <h3>Module Termin√© ! üéâ</h3>
                <p>Votre score final : <span id="final-score"></span> points.</p>
                <p>Badge d√©bloqu√© : **Ma√Ætre du Budget**.</p>
                <button class="action-btn">Passer au Module Suivant</button>
            </article>
        </section>

    </main>

    <footer role="contentinfo" class="footer-futuristic">
        <p>¬© 2025 Finance 4All Learning Lab. Code optimis√©.</p>
    </footer>

    <script>
        // 7. Meilleure Gestion d'√âtat pour les Quiz
        const appState = {
            score: 0,
            currentQuestionIndex: 0,
            isAnswered: false,
            quizData: [
                { 
                    question: "Quelle est la r√®gle d'or d'une bonne gestion budg√©taire ?", 
                    options: ["√âpargner l'int√©gralit√© de son salaire.", "La r√®gle 50/30/20 (Besoin/Envie/√âpargne).", "D√©penser plus que ce que l'on gagne."],
                    correctAnswerIndex: 1,
                    points: 10
                },
                { 
                    question: "Qu'est-ce que l'int√©r√™t compos√© (Compound Interest) ?", 
                    options: ["Un int√©r√™t simple calcul√© une fois par an.", "L'int√©r√™t calcul√© sur le montant initial et sur les int√©r√™ts d√©j√† accumul√©s.", "Une taxe sur les investissements."],
                    correctAnswerIndex: 1,
                    points: 15
                },
                { 
                    question: "Quel actif financier est g√©n√©ralement consid√©r√© comme le plus liquide ?", 
                    options: ["L'immobilier.", "Les actions d'une petite startup.", "L'argent d√©tenu sur un compte courant."],
                    correctAnswerIndex: 2,
                    points: 10
                }
            ],
        };

        const DOM = {
            scoreElement: document.getElementById('user-score'),
            questionNumElement: document.getElementById('current-q-num'),
            totalNumElement: document.getElementById('total-q-num'),
            questionText: document.getElementById('current-question'),
            optionsContainer: document.getElementById('options-container'),
            feedbackBox: document.getElementById('feedback-message'),
            submitBtn: document.getElementById('submit-btn'),
            nextBtn: document.getElementById('next-btn'),
            progressBar: document.querySelector('.progress-fill'),
            quizModule: document.getElementById('quiz-module'),
            completionScreen: document.getElementById('completion-screen'),
            finalScore: document.getElementById('final-score'),
        };

        // --- Fonctions d'√âtat et de Rendu ---

        /**
         * 4. Gamification UX: Mise √† jour du score et de la progression
         * @param {number} pointsToAdd 
         */
        function updateScore(pointsToAdd) {
            appState.score += pointsToAdd;
            DOM.scoreElement.textContent = `üí∞ ${appState.score} Points`;
        }

        function renderQuestion() {
            const index = appState.currentQuestionIndex;
            const q = appState.quizData[index];
            
            // Mise √† jour des num√©ros de question
            DOM.questionNumElement.textContent = index + 1;
            DOM.totalNumElement.textContent = appState.quizData.length;

            DOM.questionText.textContent = q.question;
            DOM.optionsContainer.innerHTML = '';
            
            // Rendre les options
            q.options.forEach((option, idx) => {
                const btn = document.createElement('button');
                btn.type = 'button';
                btn.className = 'option-btn';
                btn.dataset.index = idx;
                btn.innerHTML = `<span class="option-label">${String.fromCharCode(65 + idx)}</span> ${option}`;
                // 3. WCAG : Gestion du TabIndex pour la navigation au clavier
                btn.tabIndex = idx === 0 ? 0 : -1; 
                DOM.optionsContainer.appendChild(btn);
            });
            
            // Mettre √† jour la barre de progression (Point 2/4)
            const progress = (index / appState.quizData.length);
            // La mise √† jour du style CSS d√©clenche la transition GPU-accelerated
            DOM.progressBar.style.transform = `scaleX(${progress})`;

            // R√©initialiser les boutons d'action
            DOM.submitBtn.disabled = true;
            DOM.submitBtn.hidden = false;
            DOM.nextBtn.hidden = true;
            DOM.feedbackBox.hidden = true;
        }
        
        // --- Gestion des √âv√©nements ---

        /**
         * G√®re la s√©lection d'une option et active le bouton Valider
         */
        function handleSelection(event) {
            if (appState.isAnswered) return;

            const selectedBtn = event.target.closest('.option-btn');
            if (!selectedBtn) return;

            // Retirer la classe 'selected' de tous les boutons
            DOM.optionsContainer.querySelectorAll('.option-btn').forEach(btn => {
                btn.classList.remove('selected');
                btn.tabIndex = -1; // D√©sactiver l'indexation pour les autres
            });

            // Ajouter la classe 'selected' au bouton cliqu√© et activer le focus/tabindex
            selectedBtn.classList.add('selected');
            selectedBtn.tabIndex = 0;
            
            DOM.submitBtn.disabled = false;
        }

        /**
         * 8. Feedbacks Visuels Imm√©diats
         */
        function handleSubmit() {
            if (appState.isAnswered) return;
            
            const selectedBtn = DOM.optionsContainer.querySelector('.option-btn.selected');
            if (!selectedBtn) return;
            
            appState.isAnswered = true;
            const selectedIndex = parseInt(selectedBtn.dataset.index);
            const q = appState.quizData[appState.currentQuestionIndex];
            
            const isCorrect = selectedIndex === q.correctAnswerIndex;
            
            // Appliquer les classes CSS pour le feedback visuel (point 8)
            if (isCorrect) {
                selectedBtn.classList.add('correct');
                DOM.feedbackBox.innerHTML = `‚úÖ **Correct !** +${q.points} points.`;
                updateScore(q.points);
            } else {
                selectedBtn.classList.add('incorrect');
                // Montrer la bonne r√©ponse
                const correctBtn = DOM.optionsContainer.querySelector(`[data-index="${q.correctAnswerIndex}"]`);
                correctBtn.classList.add('correct'); 
                DOM.feedbackBox.innerHTML = `‚ùå **Incorrect.** La bonne r√©ponse √©tait : ${q.options[q.correctAnswerIndex]}.`;
            }
            
            // Afficher le bouton Suivant
            DOM.submitBtn.hidden = true;
            DOM.nextBtn.hidden = false;
            DOM.feedbackBox.hidden = false;
            
            // D√©sactiver toutes les options apr√®s la r√©ponse
            DOM.optionsContainer.querySelectorAll('.option-btn').forEach(btn => btn.disabled = true);
        }

        function handleNext() {
            appState.isAnswered = false;
            appState.currentQuestionIndex++;

            if (appState.currentQuestionIndex < appState.quizData.length) {
                renderQuestion();
            } else {
                // Logique de fin de quiz
                DOM.finalScore.textContent = appState.score;
                // Mettre √† jour la barre de progression √† 100%
                DOM.progressBar.style.transform = `scaleX(1)`;
                
                // Masquer le quiz et afficher l'√©cran de compl√©tion
                DOM.quizModule.hidden = true;
                DOM.completionScreen.hidden = false;
                
                // 3. WCAG : Placer le focus sur l'√©cran de compl√©tion
                DOM.completionScreen.focus();
            }
        }

        // --- Initialisation ---
        document.addEventListener('DOMContentLoaded', () => {
            if (appState.quizData.length > 0) {
                renderQuestion();
            } else {
                DOM.questionText.textContent = "Aucune question disponible.";
            }
        });

        // √âcouteurs d'√©v√©nements (D√©l√©gation d'√©v√©nements pour les options)
        DOM.optionsContainer.addEventListener('click', handleSelection);
        DOM.submitBtn.addEventListener('click', handleSubmit);
        DOM.nextBtn.addEventListener('click', handleNext);
    </script>
</body>
</html>
